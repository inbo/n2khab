<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demonstrating package &amp; data setup and handling of sf objects: a case with read_soilmap() • n2khab</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Demonstrating package &amp; data setup and handling of sf objects: a case with read_soilmap()">
<meta property="og:description" content="n2khab">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">n2khab</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v010_reference_lists.html">Reference lists and using them</a>
    </li>
    <li>
      <a href="../articles/v020_datastorage.html">Where to store the N2KHAB input data sources</a>
    </li>
    <li>
      <a href="../articles/v022_example.html">Demonstrating package &amp; data setup and handling of sf objects: a case with read_soilmap()</a>
    </li>
    <li>
      <a href="../articles/v025_geospatial_hab.html">Working with geospatial data sources of habitat (sub)types and RIBs</a>
    </li>
    <li>
      <a href="../articles/v030_GRTSmh.html">Using the GRTS data sources</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/n2khab/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="v022_example_files/header-attrs-2.18/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Demonstrating package &amp; data setup and
handling of sf objects: a case with read_soilmap()</h1>
                        <h4 class="author">Floris Vanderhaeghe</h4>
            
            <h4 class="date">2020-04-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/n2khab/blob/master/vignettes/v022_example.Rmd"><code>vignettes/v022_example.Rmd</code></a></small>
      <div class="hidden name"><code>v022_example.Rmd</code></div>

    </div>

    
    
<p><em>Note: for more information on data storage and locations, see
<code><a href="../articles/v020_datastorage.html">vignette("v020_datastorage")</a></code>.</em> <em>The below workflow
is an application and demonstrates current setup from R (output is
mostly not included).</em></p>
<p>If you wish to follow by running the vignette’s code chunks, you can
put a copy of the vignette in your working directory:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">source</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"doc"</span>, <span class="st">"v022_example.Rmd"</span>, package <span class="op">=</span> <span class="st">"n2khab"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span><span class="op">(</span><span class="va">source</span>, <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<div id="minimal-setup-for-using-read_soilmap" class="section level2">
<h2 class="hasAnchor">
<a href="#minimal-setup-for-using-read_soilmap" class="anchor"></a>Minimal setup for using <code>read_soilmap()</code>
</h2>
<div id="install-and-load-n2khab" class="section level3">
<h3 class="hasAnchor">
<a href="#install-and-load-n2khab" class="anchor"></a>Install and load <code>n2khab</code>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>R_REMOTES_NO_ERRORS_FROM_WARNINGS <span class="op">=</span> <span class="st">"true"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org">remotes</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"inbo/n2khab"</span>,</span>
<span>               build_vignettes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               upgrade <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://inbo.github.io/n2khab">n2khab</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Attaching n2khab version 0.8.0.</span></span>
<span><span class="co">#&gt; When working with raster objects returned by n2khab, you can safely</span></span>
<span><span class="co">#&gt; mute proj4string degradation warnings:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; options(rgdal_show_exportToProj4_warnings = "none")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; You must do this before using the n2khab functions depending on </span></span>
<span><span class="co">#&gt; rgdal or raster, and before loading the latter (or sp).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Do note that those warnings are applicable: in the returned raster</span></span>
<span><span class="co">#&gt; objects, the proj4string is effectively degraded and should not be used.</span></span>
<span><span class="co">#&gt; See https://inbo.github.io/n2khab/#suppressing-rgdal-warnings-about-proj4string-degradation</span></span>
<span><span class="co">#&gt; for more information.</span></span></code></pre></div>
</div>
<div id="create-or-locate-the-n2khab_data-directory-with-2-subdirectories" class="section level3">
<h3 class="hasAnchor">
<a href="#create-or-locate-the-n2khab_data-directory-with-2-subdirectories" class="anchor"></a>Create (or locate) the <code>n2khab_data</code> directory with 2
subdirectories</h3>
<p>This will create <code>n2khab_data</code> in the working
directory:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n2khab_data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fileman_folders.html">fileman_folders</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can also provide a custom root ‘path’ to
<code><a href="../reference/fileman_folders.html">fileman_folders()</a></code>, but then take a location that is a
(grand-grand-…) parent of the current working directory. This is because
reading functions of <code>n2khab</code> will by default use the first
<code>n2khab_data</code> directory they can find, starting from the
working directory and sequentially climbing up one directory level at a
time.</p>
<p>If you already have an existing <code>n2khab_data</code> directory in
place, instead run:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n2khab_data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fileman_up.html">fileman_up</a></span><span class="op">(</span><span class="st">"n2khab_data"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="download-the-soilmap_simple-data-source-in-the-correct-place" class="section level3">
<h3 class="hasAnchor">
<a href="#download-the-soilmap_simple-data-source-in-the-correct-place" class="anchor"></a>Download the <code>soilmap_simple</code> data source in the correct
place</h3>
<p>The <code>soilmap_simple</code> data source is a GeoPackage, provided
and documented at <a href="https://doi.org/10.5281/zenodo.3732903">Zenodo</a>. It belongs to
the collection of processed data (<a href="https://zenodo.org/communities/n2khab-data-processed">Zenodo-link</a>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soilmap_simple_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">n2khab_data_path</span>, <span class="st">"20_processed/soilmap_simple"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">soilmap_simple_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/download_zenodo.html">download_zenodo</a></span><span class="op">(</span>doi <span class="op">=</span> <span class="st">"10.5281/zenodo.3732903"</span>,</span>
<span>                path <span class="op">=</span> <span class="va">soilmap_simple_path</span><span class="op">)</span></span></code></pre></div>
<p>At some future time, the download will be performed automatically by
<code><a href="../reference/read_soilmap.html">read_soilmap()</a></code> (if the <code>soilmap_simple</code> data
source is missing).</p>
</div>
</div>
<div id="explore-the-soilmap_simple-data-source" class="section level2">
<h2 class="hasAnchor">
<a href="#explore-the-soilmap_simple-data-source" class="anchor"></a>Explore the <code>soilmap_simple</code> data source!</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/mapview">mapview</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-quantities/units/">units</a></span><span class="op">)</span></span></code></pre></div>
<p>Inspect documentation of <code><a href="../reference/read_soilmap.html">read_soilmap()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">read_soilmap</span></span></code></pre></div>
<p>Read the data source and inspect its contents:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_simple</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_soilmap.html">read_soilmap</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sm_simple</span></span>
<span><span class="co">#&gt; Simple feature collection with 270550 features and 10 fields</span></span>
<span><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span><span class="co">#&gt; dimension:      XY</span></span>
<span><span class="co">#&gt; bbox:           xmin: 22265.45 ymin: 153062.6 xmax: 258872.2 ymax: 244027.9</span></span>
<span><span class="co">#&gt; CRS:            31370</span></span>
<span><span class="co">#&gt; # A tibble: 270,550 x 11</span></span>
<span><span class="co">#&gt;    bsm_poly_id bsm_region bsm_converted bsm_mo_soilunit… bsm_mo_substr</span></span>
<span><span class="co">#&gt;  *       &lt;dbl&gt; &lt;fct&gt;      &lt;lgl&gt;         &lt;fct&gt;            &lt;fct&gt;        </span></span>
<span><span class="co">#&gt;  1      165740 Kunstmati… FALSE         OB               &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  2      176046 Kunstmati… FALSE         OB               &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  3      185239 Zandleems… FALSE         Ldc              &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  4      162400 Kunstmati… FALSE         OB               &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  5      173971 Kunstmati… FALSE         OB               &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  6      173087 Zandleems… FALSE         Ldp              &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  7      199453 Zandleems… FALSE         Lep              &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  8      176922 Zandleems… FALSE         Ldc              &lt;NA&gt;         </span></span>
<span><span class="co">#&gt;  9      227861 Zandleems… FALSE         Abp(c)           &lt;NA&gt;         </span></span>
<span><span class="co">#&gt; 10      185390 Zandleems… FALSE         Lca              &lt;NA&gt;         </span></span>
<span><span class="co">#&gt; # … with 270,540 more rows, and 6 more variables: bsm_mo_tex &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_mo_drain &lt;fct&gt;, bsm_mo_prof &lt;fct&gt;, bsm_mo_parentmat &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_mo_profvar &lt;fct&gt;, geom &lt;MULTIPOLYGON [m]&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">sm_simple</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 270,550</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ bsm_poly_id        &lt;dbl&gt; 165740, 176046, 185239, 162400, 173971, 173087, 19…</span></span>
<span><span class="co">#&gt; $ bsm_region         &lt;fct&gt; Kunstmatige gronden, Kunstmatige gronden, Zandleem…</span></span>
<span><span class="co">#&gt; $ bsm_converted      &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…</span></span>
<span><span class="co">#&gt; $ bsm_mo_soilunitype &lt;fct&gt; OB, OB, Ldc, OB, OB, Ldp, Lep, Ldc, Abp(c), Lca, O…</span></span>
<span><span class="co">#&gt; $ bsm_mo_substr      &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ bsm_mo_tex         &lt;fct&gt; NA, NA, L, NA, NA, L, L, L, A, L, NA, L, L, NA, NA…</span></span>
<span><span class="co">#&gt; $ bsm_mo_drain       &lt;fct&gt; NA, NA, d, NA, NA, d, e, d, b, c, NA, d, c, NA, NA…</span></span>
<span><span class="co">#&gt; $ bsm_mo_prof        &lt;fct&gt; NA, NA, c, NA, NA, p, p, c, p, a, NA, c, a, NA, NA…</span></span>
<span><span class="co">#&gt; $ bsm_mo_parentmat   &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…</span></span>
<span><span class="co">#&gt; $ bsm_mo_profvar     &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, (c), NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ geom               &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((204667.9 19..., MULTI…</span></span></code></pre></div>
<p>You can also read the explanations for levels of the code variables
<code>bsm_mo_substr</code>, <code>bsm_mo_tex</code>,
<code>bsm_mo_drain</code> etc. from the data source and insert them as
columns (with order of factor levels matching the corresponding code’s
factor level order). To do that, you must read the data source with
<code>explan = TRUE</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_simple</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_soilmap.html">read_soilmap</a></span><span class="op">(</span>explan <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">sm_simple</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 270,550</span></span>
<span><span class="co">#&gt; Columns: 17</span></span>
<span><span class="co">#&gt; $ bsm_poly_id             &lt;dbl&gt; 165740, 176046, 185239, 162400, 173971, 17308…</span></span>
<span><span class="co">#&gt; $ bsm_region              &lt;fct&gt; Kunstmatige gronden, Kunstmatige gronden, Zan…</span></span>
<span><span class="co">#&gt; $ bsm_converted           &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…</span></span>
<span><span class="co">#&gt; $ bsm_mo_soilunitype      &lt;fct&gt; OB, OB, Ldc, OB, OB, Ldp, Lep, Ldc, Abp(c), L…</span></span>
<span><span class="co">#&gt; $ bsm_mo_substr           &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ bsm_mo_substr_explan    &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ bsm_mo_tex              &lt;fct&gt; NA, NA, L, NA, NA, L, L, L, A, L, NA, L, L, N…</span></span>
<span><span class="co">#&gt; $ bsm_mo_tex_explan       &lt;fct&gt; NA, NA, zandleem, NA, NA, zandleem, zandleem,…</span></span>
<span><span class="co">#&gt; $ bsm_mo_drain            &lt;fct&gt; NA, NA, d, NA, NA, d, e, d, b, c, NA, d, c, N…</span></span>
<span><span class="co">#&gt; $ bsm_mo_drain_explan     &lt;fct&gt; NA, NA, "matig nat, matig gleyig", NA, NA, "m…</span></span>
<span><span class="co">#&gt; $ bsm_mo_prof             &lt;fct&gt; NA, NA, c, NA, NA, p, p, c, p, a, NA, c, a, N…</span></span>
<span><span class="co">#&gt; $ bsm_mo_prof_explan      &lt;fct&gt; NA, NA, "met sterk gevlekte textuur (bij lemi…</span></span>
<span><span class="co">#&gt; $ bsm_mo_parentmat        &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ bsm_mo_parentmat_explan &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span><span class="co">#&gt; $ bsm_mo_profvar          &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, (c), NA, NA, …</span></span>
<span><span class="co">#&gt; $ bsm_mo_profvar_explan   &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, Bedolven text…</span></span>
<span><span class="co">#&gt; $ geom                    &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((204667.9 19..., …</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>drain_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">sm_simple</span><span class="op">$</span><span class="va">bsm_mo_drain</span><span class="op">)</span>,</span>
<span>       drain_levels_explained <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">sm_simple</span><span class="op">$</span><span class="va">bsm_mo_drain_explan</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 15 x 2</span></span>
<span><span class="co">#&gt;    drain_levels drain_levels_explained                                          </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;        &lt;chr&gt;                                                           </span></span>
<span><span class="co">#&gt;  1 a            zeer droog, niet gleyig                                         </span></span>
<span><span class="co">#&gt;  2 a-b          complex van zeer droog, niet gleyig tot droog, niet gleyig      </span></span>
<span><span class="co">#&gt;  3 a-d          complex van zeer droog, niet gleyig tot matig nat, matig gleyig </span></span>
<span><span class="co">#&gt;  4 b            droog, niet gleyig                                              </span></span>
<span><span class="co">#&gt;  5 c            matig droog, zwak gleyig                                        </span></span>
<span><span class="co">#&gt;  6 c-d          complex van droog, zwak gleyig tot matig droog, matig gleyig    </span></span>
<span><span class="co">#&gt;  7 d            matig nat, matig gleyig                                         </span></span>
<span><span class="co">#&gt;  8 e            nat, sterk gleyig met reductiehorizont                          </span></span>
<span><span class="co">#&gt;  9 e-f          complex van nat, matig gleyig tot zeer nat, zeer sterk gleyig m…</span></span>
<span><span class="co">#&gt; 10 e-i          complex nat, sterk gleyig met reductiehorizont tot zeer nat met…</span></span>
<span><span class="co">#&gt; 11 f            zeer nat, zeer sterk gleyig met reductiehorizont                </span></span>
<span><span class="co">#&gt; 12 g            uiterst nat, gereduceerd                                        </span></span>
<span><span class="co">#&gt; 13 h            nat met relatief hoge ligging, sterk gleyig                     </span></span>
<span><span class="co">#&gt; 14 h-i          complex van nat met relatief hoge ligging, sterk gleyig tot zee…</span></span>
<span><span class="co">#&gt; 15 i            zeer nat met relatief hoge ligging, zeer sterk gleyig</span></span></code></pre></div>
<p><em>Note: for the following chunks, it doesn’t matter whether you
used <code>explan = TRUE</code> or not.</em></p>
<p>How many polygons are available per region?</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_simple</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="va">st_drop_geometry</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">bsm_region</span><span class="op">)</span></span></code></pre></div>
<p>Wat is the average polygon area per region?</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_simple</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>area <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="va">st_drop_geometry</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">bsm_region</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Plot polygons of the ‘Zwin’ region:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zwin_map</span> <span class="op">&lt;-</span></span>
<span>    <span class="va">sm_simple</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">bsm_region</span> <span class="op">==</span> <span class="st">"Zwin"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">bsm_mo_tex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>with WGS84 graticule (though plotted in Belgian Lambert 72 = CRS
31370):</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zwin_map</span></span></code></pre></div>
<ul>
<li>with Belgian Lambert 72 graticule:</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zwin_map</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>datum <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="fl">31370</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>make an interactive map of it, providing two alternative
basemaps:</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_simple</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">bsm_region</span> <span class="op">==</span> <span class="st">"Zwin"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>bsm_mo_tex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">bsm_mo_tex</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapview</a></span><span class="op">(</span>zcol <span class="op">=</span> <span class="st">"bsm_mo_tex"</span>,</span>
<span>                alpha.region <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                map.types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"OpenStreetMap"</span>, <span class="st">"OpenTopoMap"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Clicking a feature on the above generated map reveals all
attributes.</p>
</div>
<div id="access-more-information-the-soilmap-data-source" class="section level2">
<h2 class="hasAnchor">
<a href="#access-more-information-the-soilmap-data-source" class="anchor"></a>Access more information: the <code>soilmap</code> data source</h2>
<div id="download-the-soilmap-data-source-in-the-correct-place" class="section level3">
<h3 class="hasAnchor">
<a href="#download-the-soilmap-data-source-in-the-correct-place" class="anchor"></a>Download the <code>soilmap</code> data source in the correct
place</h3>
<p>The digital soil map of the Flemish Region is published <a href="https://www.dov.vlaanderen.be/geonetwork/srv/dut/catalog.search#/metadata/5c129f2d-4498-4bc3-8860-01cb2d513f8f">at
DOV</a> (Databank Ondergrond Vlaanderen). The <code>soilmap</code> data
source is the (renamed) shapefile, stored (with versioning) <a href="https://doi.org/10.5281/zenodo.3387007">at Zenodo</a> in order to
support the <code><a href="../reference/read_soilmap.html">read_soilmap()</a></code> function and to sustain
long-term workflow reproducibility. The <code>soilmap</code> data source
belongs to the raw data collection (<a href="https://zenodo.org/communities/n2khab-data-raw">Zenodo-link</a>).</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">soilmap_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">n2khab_data_path</span>, <span class="st">"10_raw/soilmap"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">soilmap_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/download_zenodo.html">download_zenodo</a></span><span class="op">(</span>doi <span class="op">=</span> <span class="st">"10.5281/zenodo.3387008"</span>,</span>
<span>                path <span class="op">=</span> <span class="va">soilmap_path</span>,</span>
<span>                parallel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>At some time in future, the download will be performed automatically
by <code><a href="../reference/read_soilmap.html">read_soilmap()</a></code> (if the <code>soilmap</code> data source
is missing).</p>
</div>
<div id="explore-the-soilmap-data-source" class="section level3">
<h3 class="hasAnchor">
<a href="#explore-the-soilmap-data-source" class="anchor"></a>Explore the soilmap data source</h3>
<p>Read the data source – this takes a while (large dataset) – and
inspect its contents:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_soilmap.html">read_soilmap</a></span><span class="op">(</span>use_processed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">sm</span></span>
<span><span class="co">#&gt; Simple feature collection with 270550 features and 37 fields</span></span>
<span><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span><span class="co">#&gt; dimension:      XY</span></span>
<span><span class="co">#&gt; bbox:           xmin: 22265.45 ymin: 153062.6 xmax: 258872.2 ymax: 244027.9</span></span>
<span><span class="co">#&gt; CRS:            EPSG:31370</span></span>
<span><span class="co">#&gt; # A tibble: 270,550 x 38</span></span>
<span><span class="co">#&gt;    bsm_poly_id bsm_map_id bsm_region bsm_ge_region bsm_legend bsm_legend_title</span></span>
<span><span class="co">#&gt;  *       &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;      &lt;fct&gt;         &lt;fct&gt;      &lt;fct&gt;           </span></span>
<span><span class="co">#&gt;  1      165740 61E        Kunstmati… &lt;NA&gt;          Antropoge… bodemserie OB   </span></span>
<span><span class="co">#&gt;  2      176046 78W        Kunstmati… &lt;NA&gt;          Antropoge… bodemserie OB   </span></span>
<span><span class="co">#&gt;  3      185239 95W        Zandleems… &lt;NA&gt;          Vochtig z… bodemseries Lda…</span></span>
<span><span class="co">#&gt;  4      162400 75E        Kunstmati… &lt;NA&gt;          Antropoge… bodemserie OB   </span></span>
<span><span class="co">#&gt;  5      173971 63W        Kunstmati… &lt;NA&gt;          Antropoge… bodemserie OB   </span></span>
<span><span class="co">#&gt;  6      173087 64W        Zandleems… &lt;NA&gt;          Vochtig z… bodemserie Ldp …</span></span>
<span><span class="co">#&gt;  7      199453 98E        Zandleems… &lt;NA&gt;          Nat zandl… bodemserie Lep …</span></span>
<span><span class="co">#&gt;  8      176922 81W        Zandleems… &lt;NA&gt;          Vochtig z… bodemseries Lda…</span></span>
<span><span class="co">#&gt;  9      227861 88W        Zandleems… &lt;NA&gt;          Droge leem bodemserie Abp …</span></span>
<span><span class="co">#&gt; 10      185390 95W        Zandleems… &lt;NA&gt;          Vochtig z… bodemseries Lca…</span></span>
<span><span class="co">#&gt; # … with 270,540 more rows, and 32 more variables: bsm_legend_explan &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_soiltype_id &lt;dbl&gt;, bsm_soiltype &lt;fct&gt;, bsm_ge_typology &lt;lgl&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_soiltype_region &lt;fct&gt;, bsm_soilseries &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_soilseries_explan &lt;fct&gt;, bsm_mo_soilunitype &lt;fct&gt;, bsm_mo_substr &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_mo_substr_explan &lt;fct&gt;, bsm_mo_tex &lt;fct&gt;, bsm_mo_tex_explan &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_mo_drain &lt;fct&gt;, bsm_mo_drain_explan &lt;fct&gt;, bsm_mo_prof &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_mo_prof_explan &lt;fct&gt;, bsm_mo_parentmat &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_mo_parentmat_explan &lt;fct&gt;, bsm_mo_profvar &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_mo_profvar_explan &lt;fct&gt;, bsm_mo_phase &lt;fct&gt;, bsm_ge_substr &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_ge_substr_explan &lt;fct&gt;, bsm_ge_series &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_ge_series_explan &lt;fct&gt;, bsm_ge_subseries &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_ge_subseries_explan &lt;fct&gt;, bsm_map_url &lt;fct&gt;, bsm_book_url &lt;fct&gt;,</span></span>
<span><span class="co">#&gt; #   bsm_detailmap_url &lt;fct&gt;, bsm_profloc_url &lt;fct&gt;, geometry &lt;MULTIPOLYGON [m]&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">sm</span><span class="op">)</span></span></code></pre></div>
<p>Extract features that belong to the ‘Middellandpolders’ region:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_mp</span> <span class="op">&lt;-</span></span>
<span>    <span class="va">sm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">bsm_region</span> <span class="op">==</span> <span class="st">"Middellandpolders"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">sm_mp</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3991   38</span></span></code></pre></div>
<ul>
<li>make an interactive map (which may open in your webbrowser), with
two alternative base maps:</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_mp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>bsm_ge_series <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">bsm_ge_series</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapview</a></span><span class="op">(</span>zcol <span class="op">=</span> <span class="st">"bsm_ge_series"</span>,</span>
<span>            alpha.region <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>            map.types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Wikimedia"</span>, <span class="st">"CartoDB.Positron"</span><span class="op">)</span>,</span>
<span>            alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>calculate surface area (ha) and polygon count per
<code>bsm_ge_series</code>:</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_mp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>area <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html">set_units</a></span><span class="op">(</span><span class="st">"ha"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="va">st_drop_geometry</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">bsm_ge_series</span>, <span class="va">bsm_ge_series_explan</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>              nr_polygons <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="va">kable</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="80%">
<col width="6%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">bsm_ge_series</th>
<th align="left">bsm_ge_series_explan</th>
<th align="right">area</th>
<th align="right">nr_polygons</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">D</td>
<td align="left">overdekte kreekruggronden - Middelland materiaal over
Oudland kreekrugmateriaal</td>
<td align="right">9126.95 [ha]</td>
<td align="right">1387</td>
</tr>
<tr class="even">
<td align="left">E</td>
<td align="left">dekkleigronden - meer dan 100 cm Duinkerken
III-klei</td>
<td align="right">7160.28 [ha]</td>
<td align="right">761</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">overdekte poelgronden en overdekte oude
kleiplaatgronden met storende laag op geringe diepte</td>
<td align="right">4848.24 [ha]</td>
<td align="right">1110</td>
</tr>
<tr class="even">
<td align="left">P</td>
<td align="left">overdekte Pleistocene gronden - gebroken
poldermateriaal op Pleistoceen zand</td>
<td align="right">3506.81 [ha]</td>
<td align="right">582</td>
</tr>
<tr class="odd">
<td align="left">G</td>
<td align="left">geulgronden - meer dan 100 cm zware Duinkerken III-klei
in laaggelegen geulen</td>
<td align="right">815.64 [ha]</td>
<td align="right">72</td>
</tr>
<tr class="even">
<td align="left">A</td>
<td align="left">kreekruggronden - slibhoudend zand tot klei overgaand
naar lichter materiaal</td>
<td align="right">308.98 [ha]</td>
<td align="right">27</td>
</tr>
<tr class="odd">
<td align="left">A</td>
<td align="left">kreekruggronden - slibhoudend zand tot klei overgaand
naar lichter materiaal + overdekte kreekrugronden - Middellland
materiaal over Oudland kreekrugmateriaal</td>
<td align="right">230.75 [ha]</td>
<td align="right">33</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">gronden van de Lage Moeren</td>
<td align="right">163.11 [ha]</td>
<td align="right">19</td>
</tr>
</tbody>
</table>
<ul>
<li>calculate surface area (ha) and polygon count per soilseries where
<code>bsm_ge_series == "D"</code>:</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_mp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">bsm_ge_series</span> <span class="op">==</span> <span class="st">"D"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>area <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html">set_units</a></span><span class="op">(</span><span class="st">"ha"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="va">st_drop_geometry</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">bsm_soilseries</span>, <span class="va">bsm_soilseries_explan</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>              nr_polygons <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="va">kable</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="14%">
<col width="61%">
<col width="12%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">bsm_soilseries</th>
<th align="left">bsm_soilseries_explan</th>
<th align="right">area</th>
<th align="right">nr_polygons</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">m.D5</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">4628.42 [ha]</td>
<td align="right">642</td>
</tr>
<tr class="even">
<td align="left">m.Dk5</td>
<td align="left">Overdekte kreekruggronden - klei
(Middellandpolders)</td>
<td align="right">1287.51 [ha]</td>
<td align="right">123</td>
</tr>
<tr class="odd">
<td align="left">m.Dl5</td>
<td align="left">Overdekte kreekruggronden - slibhoudend zand
(Middellandpolders)</td>
<td align="right">1070.21 [ha]</td>
<td align="right">105</td>
</tr>
<tr class="even">
<td align="left">m.D4</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">843.91 [ha]</td>
<td align="right">259</td>
</tr>
<tr class="odd">
<td align="left">m.D2</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">392.31 [ha]</td>
<td align="right">75</td>
</tr>
<tr class="even">
<td align="left">m.Dl6</td>
<td align="left">Overdekte kreekruggronden - slibhoudend zand
(Middellandpolders)</td>
<td align="right">170.04 [ha]</td>
<td align="right">37</td>
</tr>
<tr class="odd">
<td align="left">m.D5l</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">169.59 [ha]</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">m.Dl4</td>
<td align="left">Overdekte kreekruggronden - slibhoudend zand
(Middellandpolders)</td>
<td align="right">159.95 [ha]</td>
<td align="right">29</td>
</tr>
<tr class="odd">
<td align="left">m.Dl2</td>
<td align="left">Overdekte kreekruggronden - slibhoudend zand
(Middellandpolders)</td>
<td align="right">127.59 [ha]</td>
<td align="right">28</td>
</tr>
<tr class="even">
<td align="left">m.Dk6</td>
<td align="left">Overdekte kreekruggronden - klei
(Middellandpolders)</td>
<td align="right">115.02 [ha]</td>
<td align="right">19</td>
</tr>
<tr class="odd">
<td align="left">m.D4l</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">85.74 [ha]</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">m.D3</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">20.93 [ha]</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">m.Df1</td>
<td align="left">Overdekte kreekruggronden - zware klei
(Middellandpolders)</td>
<td align="right">20.43 [ha]</td>
<td align="right">23</td>
</tr>
<tr class="even">
<td align="left">m.Dk4</td>
<td align="left">Overdekte kreekruggronden - klei
(Middellandpolders)</td>
<td align="right">15.08 [ha]</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">m.D1</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">13.74 [ha]</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">m.D5d</td>
<td align="left">Overdekte kreekruggronden (Middellandpolders)</td>
<td align="right">6.46 [ha]</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<ul>
<li>plot all features where <code>bsm_soilseries == "m.D5"</code>
(providing all <code>mapview</code>’s default base maps):</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sm_mp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">bsm_soilseries</span> <span class="op">==</span> <span class="st">"m.D5"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapview</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>            alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>            alpha.region <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Floris Vanderhaeghe, Toon Westra, Cécile Herr, Hans Van Calster.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
